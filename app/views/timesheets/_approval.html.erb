<% if TimesheetApproval.exists?(employee_id: current_user.employee.id, month: @month) %>

  <div>You have already submitted your Timesheet</div>
  <div>Your Approval Status</div>

<% else %>

  <%= form_for new_timesheet_approval_path, remote: true do |f| %>
      <%= f.hidden_field :employee_id, value: current_user.employee.id %>
      <%= f.hidden_field :month, value: @month %>

      <div class="row mt-2 mb-3">
        <div class="col-lg-3 col-md-6 mb-2">
          <div>Approval 1</div>
          <div><%= f.select(:apv_mgr_1_id, Employee.where(position: "Manager").collect {|e| [ e.full_name, e.id ] }, {include_blank: "Select Manager Approval"}, class: "custom-select custom-select-sm") %></div>
        </div>
        <div class="col-lg-3 col-md-6 mb-2">
          <div>Approval 2</div>
          <div><%= f.select(:apv_mgr_2_id, Employee.where(position: "Manager").collect {|e| [ e.full_name, e.id ] }, {include_blank: "Select Manager Approval"}, class: "custom-select custom-select-sm") %></div>
        </div>
      </div>

      <div class="mx-auto">
        <%= f.submit "Submit Timesheet", class: "btn btn-info", method: "post", data: { confirm: 'Are you confirm submit timesheet to manager?' } %>
      </div>
  <% end %>

<% end %>