<div id="announcement-board">
    <%= render partial: "announcements/board" %>
</div>

<div class="row text-special pl-4 pr-4 pt-2 pb-2 bg-chrome rounded">
    <div class="col-12 text-white">Welcome Back! <span class="text-primary"><%=current_user.username%></span>  </div>
    <div class="col-12 text-white">Your webrole is: <span class="text-danger"><%=current_user.webrole.role%></span></div>
</div>

<div class="row text-dark text-special mt-4 mb-4 p-4 bg-glass rounded">

    <div class="mt-4 mb-4">

        <% if current_user.webrole.vw_hr %>
        <div class="dropdown">
            <button class="btn btn-success dropdown-toggle mt-1 mb-1" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                HR Department
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <%= link_to "Dashboard", dashhr_path, class: "dropdown-item", remote: true %>
                <%= link_to "Employee", employees_path, class: "dropdown-item", remote: true %>
                <%= link_to "Project", projects_path, class: "dropdown-item", remote: true %>
                <%= link_to "Equipment", "", class: "dropdown-item disabled", remote: true %>
                <%= link_to "Announcement", announcements_path, class: "dropdown-item", remote: true %>
                <%= link_to "Holiday", holidays_path, class: "dropdown-item", remote: true %>
            </div>
        </div>
        <% end %>

        <% if current_user.webrole.vw_finance %>
        <div class="dropdown">
            <button class="btn btn-info dropdown-toggle mt-1 mb-1" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Finance
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <%= link_to "Dashboard", dashfinance_path, class: "dropdown-item", remote: true %>
                <%= link_to "Timesheet Overview", finance_timesheet_path, class: "dropdown-item", remote: true %>
            </div>
        </div>
        <% end %>

        <% if current_user.webrole.vw_pro_mgr %>
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle mt-1 mb-1" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Manager
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <%= link_to "Dashboard", dashpm_path, class: "dropdown-item", remote: true %>
                <%= link_to "Leave Approval", leave_pm_approval_path, class: "dropdown-item", remote: true %>
                <%= link_to "Timsheet Approval", timesheet_pm_approval_path, class: "dropdown-item", remote: true %>
                <%= link_to "Expense Approval", expense_pm_approval_path, class: "dropdown-item", remote: true %>
            </div>
        </div>
        <% end %>

        <% if current_user.webrole.vw_it %>
        <div class="dropdown">
            <button class="btn btn-danger dropdown-toggle mt-1 mb-1" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                IT
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <%= link_to "Dashboard", dashit_path, class: "dropdown-item", remote: true %>
                <%= link_to "Webrole", webrole_path, class: "dropdown-item", remote: true %>
                <%= link_to "Account", account_path, class: "dropdown-item", remote: true %>
            </div>
        </div>
        <% end %>

        <% if current_user.webrole.vw_emp %>
        <div class="dropdown">
            <button class="btn btn-warning dropdown-toggle mt-1 mb-1" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Employee
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <%= link_to "Dashboard", dashemployee_path, class: "dropdown-item", remote: true %>
                <%= link_to "Leaves", leaveaps_path, class: "dropdown-item", remote: true %>
                <%= link_to "Timesheets", timesheetemployee_path, class: "dropdown-item", remote: true %>
                <%= link_to "Expenses", expenseemployee_path, class: "dropdown-item", remote: true %>
                <%= link_to "Equipment", "", class: "dropdown-item disabled", remote: true %>
                <%= link_to "Payroll", "", class: "dropdown-item disabled", remote: true %>
            </div>
        </div>
        <% end %>
        
    </div>

    <div class="justify-content-center w-100" id="main-dashboard" style="min-height:30rem;">
        <p>Please Select</p>
    </div>

</div>


<script>

function myFunction() {
  var element = getElementsByClassName("btn-sm")
  element.classList.add("active");
}

function loadjs(table, sortColumn, pageLength, dom) {
    $(table).DataTable({
      "order": [sortColumn],
      "search": {
        "caseInsensitive": true
      },
      "pageLength": pageLength,
      "dom": dom,
      buttons: ['csv']
    });
};

</script>